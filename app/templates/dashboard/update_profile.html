{% extends 'dashboard/dashboard.html' %}

{% block title %}Home{% endblock %}

{% block main %}
<main class="profile-page">
    <div class="profile-container">
        <!-- Left side - Form -->
        <div class="profile-form">
            <form action="{{ url_for('dashboard.update_profile', id=g.user['id']) }}" method="post">
                <div class="login-box wide-box">
                    <h2>Update Profile</h2>
                    {% for message in get_flashed_messages() %}
                    <div class="flash">{{ message }}</div>
                    {% endfor %}
                    <div class="form-scroll-container">
                        <!-- Profile Information Section -->
                        <h3 class="section-title">Profile Information</h3>
                        <div class="user-box">
                            <input name="username" type="text"
                                value="{{ user['username'] or request.form['username'] }}">
                            <label>Username</label>
                        </div>
                        <div class="user-box">
                            <input name="first_name" type="text"
                                value="{{ user['first_name'] or request.form['first_name'] }}">
                            <label>First Name</label>
                        </div>
                        <div class="user-box">
                            <input name="middle_name" type="text"
                                value="{{ user['middle_name'] or request.form['middle_name'] }}">
                            <label>Middle Name</label>
                        </div>
                        <div class="user-box">
                            <div class="cb">
                                <input id="cb" name="no_middle_name" type="checkbox" {% if user['no_middle_name'] %}checked{% endif %}>
                                <span>No Legal Middle Name</span>
                            </div>
                        </div>
                        <div class="user-box">
                            <input name="last_name" type="text"
                                value="{{ user['last_name'] or request.form['last_name'] }}">
                            <label>Last Name</label>
                        </div>
                        <div class="user-box">
                            <input name="email" type="email"
                                value="{{ user['email'] or request.form['email'] }}">
                            <label>Email</label>
                        </div>
                        
                        <!-- Authentication Section - For confirmation only -->
                        <h3 class="section-title">Authentication</h3>
                        <p class="auth-note">Please enter your current password to confirm changes</p>
                        <div class="user-box">
                            <input name="current_password" type="password" placeholder="Current Password" required>
                            <label>Current Password</label>
                        </div>
                    </div>
                    <button type="submit">Update Profile</button>
                </div>
            </form>
        </div>
        
        <!-- Right side - User image -->
        <div class="profile-image">
            <img src="{{ url_for('static', filename='assets/images/default-avatar.jpg') }}" alt="User Profile">
            <h3>{{ user['first_name'] }} {{ user['last_name'] }}</h3>
            <p>Manage your personal information and account settings</p>
        </div>
    </div>
</main>
{% endblock %}